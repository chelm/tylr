#!/usr/bin/env node
var es = require('event-stream')

var argv = require('optimist')
    .usage('Usage: $0 -f [input geojson] -d [out-dir] -t [tile type (geojson|pbf)] -l [levels] -n [name] -a [center|box]')
    .demand(['d', 'n'])
    .default('l', '0,5')
    .default('a', 'box')
    .default('t', 'pbf')
    .argv;

var tylr = new require('../')(argv)
tylr.on('end', function(){
  console.log('done')
})

process.stdin
  .pipe(tylr.parser)
  .pipe(es.mapSync(function (feature) {
    tylr.addFeature(feature)
    return
  }))
